<!doctype html>
<html>
  <head>
    <title>griddly • all at once</title>
    <script src="//code.jquery.com/jquery-1.11.0.js"></script>
    <script src="https://rawgithub.com/carhartl/jquery-cookie/master/jquery.cookie.js"></script>
    
    <link rel="stylesheet" href="style.css">
    
    <script src="http://gridster.net/dist/jquery.gridster.js"></script>
    <link rel="stylesheet" href="http://gridster.net/dist/jquery.gridster.css">
  </head>
  <body>
    <div id="grid">
      <ul>
        <li data-row="1" data-col="1" data-sizex="1" data-sizey="1">
          Welcome to Griddly!
        </li>
        <li data-row="2" data-col="1" data-sizex="1" data-sizey="3">
          Second Box
        </li>
      </ul>
    </div>
  <script type="text/javascript">
    var grid;
  
    $(function(){ //DOM loaded
      $("#grid ul").gridster({
        widget_margins: [10, 10],
        widget_base_dimensions: [140, 140],
        draggable: {
          handle: '.drag-handle'
        }
      });
      grid = $("#grid ul").gridster().data('gridster');
    });
    
    function saveLayout(){
      $.cookie("grid-layout", JSON.stringify(grid.serialize()));
      
      var content = $("li").map(function(){return $(this).text();}).get().join('▷');
      $.cookie("grid-content", content);
    }
    
    function loadLayout(){
      var layout = JSON.parse($.cookie("grid-layout"));
      var content = $.cookie("grid-content").split("▷");
      
      grid.remove_all_widgets();
      $.each(layout, function(i) {
        grid.add_widget('<li>'+content[i]+'</li>', this.size_x, this.size_y, this.col, this.row);
      });
      
      addHandles();
    }
    
    function addHandles(){
      $("li").prepend('<div class="drag-handle" align="center"></div>');
    }
  </script>
  </body>
</html>
